---
interface Props {
  href?: string;
  label: string;
  variant?: 'dark' | 'light';
  class?: string;
  iconClass?: string;
}

const { href, label, variant = 'dark', class: className, iconClass = '' } = Astro.props;

const Tag = href ? 'a' : 'button';

const outer =
  variant === 'light'
    ? 'bg-gradient-to-b from-black/15 to-black/5 shadow-[0_10px_30px_rgba(0,0,0,0.10)]'
    : 'bg-gradient-to-b from-white/25 to-white/10 shadow-[0_10px_30px_rgba(0,0,0,0.65)]';

const glow = variant === 'light' ? 'bg-black/10' : 'bg-white/10';

const inner =
  variant === 'light'
    ? 'bg-white/85 text-slate-900 ring-1 ring-black/10 group-hover:ring-black/20 focus-visible:ring-black/25'
    : 'bg-black/90 text-white ring-1 ring-white/10 group-hover:ring-white/20 focus-visible:ring-white/30';

const iconTone =
  variant === 'light' ? 'text-slate-600 group-hover:text-slate-900' : 'text-white/80 group-hover:text-white';
---

<Tag
  {...href ? { href } : { type: 'button' }}
  class:list={['group relative inline-flex items-center rounded-full p-px transition w-fit', outer, className]}
>
  <span
    aria-hidden="true"
    class:list={[
      'pointer-events-none absolute inset-0 rounded-full opacity-0 blur-md transition group-hover:opacity-100',
      glow
    ]}></span>

  <span
    class:list={[
      'relative inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-medium backdrop-blur transition',
      inner,
      'focus-visible:outline-none focus-visible:ring-2'
    ]}
  >
    <span aria-hidden="true" class:list={['inline-flex items-center justify-center', iconTone, iconClass]}>
      <slot name="icon">
        <span class="font-mono">&gt;</span>
      </slot>
    </span>

    <span class="tracking-tight">{label}</span>
  </span>
</Tag>
